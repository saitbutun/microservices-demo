applications:
  - name: microservices-demo
    namespace: default
    source:
      type: git
      repoURL: https://github.com/saitbutun/microservices-demo.git
      targetRevision: feature/karpenter-graviton-migration
      path: microservice-app

  - name: monitoring
    syncWave: "0"
    namespace: monitoring
    serverSideApply: "true"
    source:
      type: helm
      repoURL: https://prometheus-community.github.io/helm-charts
      chart: kube-prometheus-stack
      targetRevision: 57.0.2
      helmValues: |
        crds:
          enabled: true
        prometheusOperator:
          enabled: true
          crds:
            enabled: true
        grafana:
          enabled: true
          adminPassword: admin
          service:
            type: ClusterIP
        prometheus:
          enabled: true
          service:
            type: ClusterIP
          prometheusSpec:
            retention: 7d
            replicas: 1
            serviceMonitorSelectorNilUsesHelmValues: false
        alertmanager:
          enabled: true